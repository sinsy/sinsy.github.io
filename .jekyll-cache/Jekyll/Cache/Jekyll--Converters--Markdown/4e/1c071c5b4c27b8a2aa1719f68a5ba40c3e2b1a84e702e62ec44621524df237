I"Q<p>本章主要详细讲讲transition-timing-function中的cubic-bezier与steps,而上文所讲的linear，ease， ease-in，ease-out 和 ease-in-out都是基于cubic-bezier。</p>

<p><strong>语法</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>div1 {transition-timing-function: step-start;}
div2 {transition-timing-function: cubic-bezier(0,0,1,1);}
</code></pre></div></div>

<h2 id="一cubic-bezier">一、Cubic-bezier()</h2>

<p>Cubic-bezier()是三阶贝塞尔曲线，那什么是贝塞尔曲线呢？我们在绘图软件如ps和ai中会经常看到他的身影————“钢笔工具”，是应用于二维图形应用程序的数学曲线。贝赛尔线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋。对于贝塞尔曲线有兴趣的朋友们可以通过<a href="http://www.cnblogs.com/jay-dong/archive/2012/09/26/2704188.html">“贝塞尔曲线初探”</a>一文进行了解。我们继续讲Cubic-bezier()，三阶贝赛尔曲线由四个点 P0，P1， P2， P3组成，如下图，P0  和 P3是曲线的起点和终点，在css中这些点是固定的坐标比例（横坐标是时间比，纵坐标是输出范围比）。 P0 (0,0)代表初始时间和初始状态， P3(1,1)代表结束时间和结束状态。
<img src="http://7xtflp.com1.z0.glb.clouddn.com/css3-cubic-bezier.png" alt="css3-cubic-bezier" title="css3-cubic-bezier" />
不是所有的三阶贝塞尔曲线都适合timing-function，例如曲线给定的横坐标有0或1个值。首先P0和P3必须是固定值，然后P1和P2的横坐标X值在[0,1],如果P1和P2的值。如果纵坐标Y值超过[0,1]会产生一个反弹的效果。当你定义了一个无效的cubic-bezier，css会忽略掉整个属性。看图对比正常的cubic-bizier与超出范围的cubic-bezier。</p>

<iframe src="http://www.sinsy.top/hungry/learn/css3/transition/cubic_bezier.html" frameborder="0" width="100%"></iframe>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;style&gt;</span> 
<span class="nt">div</span>
<span class="p">{</span>
<span class="nl">width</span><span class="p">:</span><span class="m">100px</span><span class="p">;</span>
<span class="nl">height</span><span class="p">:</span><span class="m">50px</span><span class="p">;</span>
<span class="nl">background</span><span class="p">:</span><span class="nb">rgb</span><span class="p">(</span><span class="m">51</span><span class="p">,</span> <span class="m">200</span><span class="p">,</span> <span class="m">100</span><span class="p">);</span>
<span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
<span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="nl">color</span><span class="p">:</span><span class="no">white</span><span class="p">;</span>
<span class="nl">font-weight</span><span class="p">:</span><span class="nb">bold</span><span class="p">;</span>
<span class="nl">font-size</span><span class="p">:</span> <span class="m">18px</span><span class="p">;</span>
<span class="nl">word-wrap</span><span class="p">:</span> <span class="n">break-word</span><span class="p">;</span>
<span class="nl">transition</span><span class="p">:</span><span class="nb">left</span> <span class="m">2s</span><span class="p">;</span>
<span class="nl">-moz-transition</span><span class="p">:</span><span class="nb">left</span> <span class="m">2s</span><span class="p">;</span> <span class="c">/* Firefox 4 */</span>
<span class="nl">-webkit-transition</span><span class="p">:</span><span class="nb">left</span> <span class="m">2s</span><span class="p">;</span> <span class="c">/* Safari and Chrome */</span>
<span class="nl">-o-transition</span><span class="p">:</span><span class="nb">left</span> <span class="m">2s</span><span class="p">;</span> <span class="c">/* Opera */</span>
<span class="p">}</span>

<span class="nf">#div1</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">);}</span>
<span class="nf">#div2</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">.38</span><span class="p">,</span><span class="m">1.45</span><span class="p">,</span><span class="m">.68</span><span class="p">,</span><span class="m">-1.33</span><span class="p">);}</span>

<span class="c">/* Firefox 4: */</span>
<span class="nf">#div1</span> <span class="p">{</span><span class="nl">-moz-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">);}</span>
<span class="nf">#div2</span> <span class="p">{</span><span class="nl">-moz-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">.38</span><span class="p">,</span><span class="m">1.45</span><span class="p">,</span><span class="m">.68</span><span class="p">,</span><span class="m">-1.33</span><span class="p">);}</span>

<span class="c">/* Safari and Chrome: */</span>
<span class="nf">#div1</span> <span class="p">{</span><span class="nl">-webkit-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">);}</span>
<span class="nf">#div2</span> <span class="p">{</span><span class="nl">-webkit-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">.38</span><span class="p">,</span><span class="m">1.45</span><span class="p">,</span><span class="m">.68</span><span class="p">,</span><span class="m">-1.33</span><span class="p">);}</span>

<span class="c">/* Opera: */</span>
<span class="nf">#div1</span> <span class="p">{</span><span class="nl">-o-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">);}</span>
<span class="nf">#div2</span> <span class="p">{</span><span class="nl">-o-transition-timing-function</span><span class="p">:</span> <span class="n">cubic-bezier</span><span class="p">(</span><span class="m">.38</span><span class="p">,</span><span class="m">1.45</span><span class="p">,</span><span class="m">.68</span><span class="p">,</span><span class="m">-1.33</span><span class="p">);}</span>

<span class="nc">.btn</span><span class="p">{</span><span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span><span class="nl">height</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span><span class="nl">outline</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span><span class="nl">border</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span><span class="nl">font-size</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span><span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span><span class="nl">margin-right</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span><span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;}</span>
<span class="nc">.pink</span><span class="p">{</span><span class="nl">background</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span> <span class="m">164</span><span class="p">);}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div1"</span> <span class="na">style=</span><span class="s">"top:20px"</span><span class="nt">&gt;</span>Y值在[0,1]范围内<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div2"</span> <span class="na">style=</span><span class="s">"top:80px"</span><span class="nt">&gt;</span>Y值超出[0,1]范围<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">move</span><span class="p">();</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">move</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">div1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span><span class="p">){</span>
        <span class="nx">div1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0px</span><span class="dl">'</span>
        <span class="nx">div2</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0px</span><span class="dl">'</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">div1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
        <span class="nx">div2</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
    <span class="p">}</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">move</span><span class="p">,</span> <span class="mi">2500</span><span class="p">)</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><strong>语法</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cubic-bezier(x1, y1, x2, y2)
</code></pre></div></div>

<p>注：x1,y1,x2,y2分别为P1和P2的横坐标与纵坐标。</p>

<p>linear，ease， ease-in，ease-out 和 ease-in-out是transition-timing-function的默认值，现在来看看它们各自对应的贝塞尔曲线。</p>

<table>
    <tr>
        <th>值</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>linear</td>
        <td>规定以相同速度开始至结束的过渡效果（等于 cubic-bezier(0,0,1,1)）。</td>
    </tr> 
    <tr>
        <td>ease</td>
        <td>规定慢速开始，然后变快，然后慢速结束的过渡效果（等于cubic-bezier(0.25,0.1,0.25,1)），默认值。</td>
    </tr>
    <tr>
        <td>ease-in</td>
        <td>规定以慢速开始的过渡效果（等于 cubic-bezier(0.42,0,1,1)）。</td>
    </tr> 
    <tr>
        <td>ease-out</td>
        <td>规定以慢速结束的过渡效果（等于 cubic-bezier(0,0,0.58,1)）。</td>
    </tr>       
    <tr>
        <td>ease-in-out</td>
        <td>规定以慢速开始和结束的过渡效果（等于 cubic-bezier(0.42,0,0.58,1)）。</td>
    </tr>
</table>

<p><img src="http://7xtflp.com1.z0.glb.clouddn.com/css3-cubic-bezier2.png" alt="css3-cubic-bezier2.png" title="css3-cubic-bezier2.png" />
使用贝塞尔曲线，我们可以创建自定义的速度。但三阶贝塞尔曲线定义动画速度的缺点是不直观，我们不能立即看到物体如何移动。幸运的是，有一个工具，我们可以利用它来帮助我们设计并获取曲线，它由<a href="http://lea.verou.me/author/admin/">Lea Verou</a>开发，工具<a href="http://cubic-bezier.com/#.17,.67,.83,.67">cubic-bezier.com</a>。
<img src="http://7xtflp.com1.z0.glb.clouddn.com/css3-cubic-bezier.com4.jpg" alt="css3-cubic-bezier.com4.jpg" title="css3-cubic-bezier.com4.jpg" /></p>

<h2 id="二steps">二、Steps()</h2>
<p>steps()定义了一个阶跃函数将输出值的域在等距的步骤。这类阶跃函数有时也被称为阶梯函数。</p>

<p><strong>语法</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>steps(number_of_steps, direction)
</code></pre></div></div>

<table>
    <tr>
        <th>值</th>
        <th>描述</th>
    </tr>
    <tr>
        <td>number_of_steps</td>
        <td>取正整数，代表等距离的步数，比如steps(2)，有两步，在规定的时间内完成两次相同距离的动作。</td>
    </tr>
    <tr>
        <td>direction</td>
        <td>是判断动作的左或右连续（默认值：end）。start：左连续，第一步发生在动画开始。end：右连续，最后一步发生在动画结束。</td>
    </tr>
</table>

<p><img src="http://7xtflp.com1.z0.glb.clouddn.com/css3-steps2.png" alt="steps" title="steps" /></p>

<iframe src="http://www.sinsy.top/hungry/learn/css3/transition/steps.html" frameborder="0" width="100%" height="250px"></iframe>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;style&gt;</span>
<span class="nt">div</span>
<span class="p">{</span>
<span class="nl">width</span><span class="p">:</span><span class="m">100px</span><span class="p">;</span>
<span class="nl">height</span><span class="p">:</span><span class="m">50px</span><span class="p">;</span>
<span class="nl">background</span><span class="p">:</span><span class="nb">rgb</span><span class="p">(</span><span class="m">51</span><span class="p">,</span> <span class="m">200</span><span class="p">,</span> <span class="m">100</span><span class="p">);</span>
<span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
<span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="nl">color</span><span class="p">:</span><span class="no">white</span><span class="p">;</span>
<span class="nl">font-weight</span><span class="p">:</span><span class="nb">bold</span><span class="p">;</span>
<span class="nl">font-size</span><span class="p">:</span> <span class="m">18px</span><span class="p">;</span>
<span class="nl">word-wrap</span><span class="p">:</span> <span class="n">break-word</span><span class="p">;</span>
<span class="nl">transition</span><span class="p">:</span><span class="nb">left</span> <span class="m">2s</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#div1</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">step-start</span><span class="p">;}</span>
<span class="nf">#div2</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">step-end</span><span class="p">;}</span>
<span class="nf">#div3</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">steps</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="n">end</span><span class="p">);}</span>
<span class="nf">#div4</span> <span class="p">{</span><span class="nl">transition-timing-function</span><span class="p">:</span> <span class="n">steps</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="n">start</span><span class="p">);}</span>
<span class="nc">.pink</span><span class="p">{</span><span class="nl">background</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span> <span class="m">164</span><span class="p">);}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div1"</span> <span class="na">style=</span><span class="s">"top:80px"</span><span class="nt">&gt;</span>step-start<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div2"</span> <span class="na">style=</span><span class="s">"top:140px"</span><span class="nt">&gt;</span>step-end<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div3"</span> <span class="na">style=</span><span class="s">"top:200px"</span><span class="nt">&gt;</span>steps(4,end)<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"div4"</span> <span class="na">style=</span><span class="s">"top:260px"</span><span class="nt">&gt;</span>steps(4,start)<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">div1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
        <span class="nx">div2</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
        <span class="nx">div3</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
        <span class="nx">div4</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">400px</span><span class="dl">'</span>
    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>本章结束，在写这几篇博文时真心挖到了不少外国好网站，资料详细，内容齐全，除了语言是英语，难懂了点，但要想在前端走得更远，学会看外国技术文档是一项必修课。今后一定要努力学好英语，在语言上吃大亏了。</p>

<h3 id="参考文档">参考文档</h3>
<ul>
  <li><a href="http://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Using_CSS_transitions">Using CSS transitions</a></li>
  <li><a href="http://www.hongkiat.com/blog/css-cubic-bezier/">A Look Into: Cubic-bezier in CSS3 Transition</a></li>
  <li><a href="http://lea.verou.me/">LEA VEROU博客</a></li>
</ul>

<h3 id="代码下载">代码下载</h3>
<ul>
  <li><a href="http://www.sinsy.top/hungry/learn/css3/transition/transition-timing-function.zip">点击下载transition-timing-function.zip</a></li>
</ul>

:ET