I"õ<h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« ï¼š</h2>
<ul>
  <li><a href="http://efe.baidu.com/blog/mobile-fixed-layout/">Webç§»åŠ¨ç«¯Fixedå¸ƒå±€çš„è§£å†³æ–¹æ¡ˆ</a></li>
  <li><a href="https://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios">Issues with position fixed &amp; scrolling on iOS</a></li>
</ul>

<h2 id="ä¸€é—®é¢˜">ä¸€ã€é—®é¢˜</h2>

<p>åœ¨ç§»åŠ¨ç«¯ä¸­ï¼ŒiOS ä¸‹ç»å¸¸ä¼šæœ‰ fixed å…ƒç´ å’Œè¾“å…¥æ¡†(input å…ƒç´ )åŒæ—¶å­˜åœ¨çš„æƒ…å†µã€‚ä½†æ˜¯ fixed å…ƒç´ åœ¨æœ‰<b>è½¯é”®ç›˜</b>å”¤èµ·çš„æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°è®¸å¤šè«åå…¶å¦™çš„é—®é¢˜ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0"&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;style&gt;
        header, footer, main {
            display: block;
        }
        header, footer{
            background: red;
        }
        header {
            position: fixed;
            height: 50px;
            left: 0;
            right: 0;
            top: 0;
        }
        footer {
            position: fixed;
            height: 34px;
            left: 0;
            right: 0;
            bottom: 0;
        }
        main {
            margin-top: 50px;
            margin-bottom: 34px;
        }

    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- fixedå®šä½çš„å¤´éƒ¨ --&gt;
    &lt;header id="header"&gt;
        
    &lt;/header&gt;
    
    &lt;!-- å¯ä»¥æ»šåŠ¨çš„åŒºåŸŸ --&gt;
    &lt;main id="main"&gt;
       
        &lt;!-- å†…å®¹åœ¨è¿™é‡Œ... --&gt;
        è‹¹æœæ‰‹æœºè½¯é”®ç›˜å¼¹èµ·æ—¶ä¼šå¯¼è‡´ï¼Œ fixed å±æ€§å¤±æ•ˆäº†ï¼
        ...
        ...
        ...
    &lt;/main&gt;
    
    &lt;!-- fixedå®šä½çš„åº•éƒ¨ --&gt;
    &lt;footer id="footer"&gt;
        &lt;input type="text" placeholder="Footer..."/&gt;
        &lt;button class="submit"&gt;æäº¤&lt;/button&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>

<p>æµ‹è¯•åœ°å€ï¼š <a href="/bige/mobile/iscroll/example/bug.html" target="_blank">bug.html</a></p>

<p>å¦‚æœåº•éƒ¨è¾“å…¥æ¡†è½¯é”®ç›˜è¢«å”¤èµ·ä»¥åï¼Œå†æ¬¡æ»‘åŠ¨é¡µé¢ï¼Œå°±ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="http://7xtflp.com1.z0.glb.clouddn.com/mobile-iscroll-fixed.png" alt="fixed bug" title="fixed bug" /></p>

<h2 id="äºŒè§£å†³æ€è·¯">äºŒã€è§£å†³æ€è·¯</h2>

<p>æ•´åˆä¸Šè¿°ä¸¤ç¯‡æ–‡ç« å¾—å‡ºæ€è·¯ï¼Œåœ¨ä¸ä½¿ç”¨iscroll.jsæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œæ—¢ç„¶åœ¨ iOS ä¸‹ç”±äºè½¯é”®ç›˜å”¤å‡ºåï¼Œé¡µé¢ fixed å…ƒç´ ä¼šå¤±æ•ˆï¼Œå¯¼è‡´è·Ÿéšé¡µé¢ä¸€èµ·æ»šåŠ¨ï¼Œé‚£ä¹ˆ<strong>å‡å¦‚é¡µé¢ä¸ä¼šè¿‡é•¿å‡ºç°æ»šåŠ¨ï¼Œé‚£ä¹ˆå³ä¾¿ fixed å…ƒç´ å¤±æ•ˆï¼Œä¹Ÿæ— æ³•è·Ÿéšé¡µé¢æ»šåŠ¨</strong>ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜äº†ã€‚
ä¿®æ”¹styleæ ·å¼:mainç»å¯¹å®šä½ï¼Œ<code class="language-plaintext highlighter-rouge">overflow-y: scroll;</code>è¿›è¡Œå†…éƒ¨æ»šåŠ¨, <code class="language-plaintext highlighter-rouge">-webkit-overflow-scrolling: touch;</code>å¯ä»¥å¢åŠ å¼¹æ€§ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;style&gt;
    header, footer, main {
        display: block;
    }
    header, footer{
        background: red;
        z-index: 100;
    }
    header {
        position: fixed;
        height: 50px;
        left: 0;
        right: 0;
        top: 0;
    }

    footer {
        position: fixed;
        height: 34px;
        left: 0;
        right: 0;
        bottom: 0;
    }

    main {
        /* mainç»å¯¹å®šä½ï¼Œè¿›è¡Œå†…éƒ¨æ»šåŠ¨ */
        position: absolute;
        top: 50px;
        bottom: 34px;
        /* ä½¿ä¹‹å¯ä»¥æ»šåŠ¨ */
        overflow-y: scroll;
        /* å¢åŠ è¯¥å±æ€§ï¼Œå¯ä»¥å¢åŠ å¼¹æ€§ */
        -webkit-overflow-scrolling: touch;
    }
&lt;/style&gt;
</code></pre></div></div>

<p>æµ‹è¯•åœ°å€ï¼š <a href="http://www.sinsy.top/hungry/learn/mobile/iscroll/example/solutionFixed.html">solutionFixed.html</a></p>

<h3 id="å…¶ä»–ç»†èŠ‚å¤„ç†">å…¶ä»–ç»†èŠ‚å¤„ç†</h3>
<ol>
  <li>åœ¨é¡µé¢æ»šåŠ¨åˆ°ä¸Šä¸‹è¾¹ç¼˜çš„æ—¶å€™ï¼Œå¦‚æœç»§ç»­æ‹–æ‹½ä¼šå°†æ•´ä¸ª View ä¸€èµ·æ‹–æ‹½èµ°ï¼Œå¯¼è‡´é¡µé¢çš„â€œéœ²åº•â€ã€‚
å¯¹ç¬¬ä¸€ç¯‡æ–‡ç« çš„jsä»£ç è¿›è¡Œå¾®å°çš„ä¿®æ”¹ï¼š</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script&gt;
// é˜²æ­¢å†…å®¹åŒºåŸŸæ»šåˆ°åº•åå¼•èµ·é¡µé¢æ•´ä½“çš„æ»šåŠ¨
var content = document.querySelector('#main');

var startY;

content.addEventListener('touchstart', function (e) {
    startY = e.touches[0].clientY;
});

content.addEventListener('touchmove', function (e) {
    // é«˜ä½è¡¨ç¤ºå‘ä¸Šæ»šåŠ¨
    // åº•ä½è¡¨ç¤ºå‘ä¸‹æ»šåŠ¨
    // 1å®¹è®¸ 0ç¦æ­¢
    var status = '11';
    var ele = this;

    var currentY = e.touches[0].clientY;

    if (ele.scrollTop === 0) {
        // å¦‚æœå†…å®¹å°äºå®¹å™¨åˆ™åŒæ—¶ç¦æ­¢ä¸Šä¸‹æ»šåŠ¨
        status = ele.offsetHeight &gt;= ele.scrollHeight ? '00' : '01';
    } else if (ele.scrollTop + ele.offsetHeight &gt;= ele.scrollHeight) {
        // å·²ç»æ»šåˆ°åº•éƒ¨äº†åªèƒ½å‘ä¸Šæ»šåŠ¨
        status = '10';
    }

    if (status != '11') {
        // åˆ¤æ–­å½“å‰çš„æ»šåŠ¨æ–¹å‘
        var direction = currentY - startY &gt; 0 ? '10' : '01';
        // æ“ä½œæ–¹å‘å’Œå½“å‰å…è®¸çŠ¶æ€æ±‚ä¸è¿ç®—ï¼Œè¿ç®—ç»“æœä¸º0ï¼Œå°±è¯´æ˜ä¸å…è®¸è¯¥æ–¹å‘æ»šåŠ¨ï¼Œåˆ™ç¦æ­¢é»˜è®¤äº‹ä»¶ï¼Œé˜»æ­¢æ»šåŠ¨
        if (!(parseInt(status, 2) &amp; parseInt(direction, 2))) {
            stopEvent(e);
            
        }
    }
    e.stopPropagation();
});
function stopEvent(e){
    e.preventDefault();
    // console.log('Default prevented');
}
&lt;/script&gt;
</code></pre></div></div>

<ol>
  <li>æœ€å¥½å°† header å’Œ footer å…ƒç´ çš„ touchmove äº‹ä»¶ç¦æ­¢ï¼Œä»¥é˜²æ­¢æ»šåŠ¨åœ¨ä¸Šé¢è§¦å‘äº†éƒ¨åˆ†æµè§ˆå™¨å…¨å±æ¨¡å¼åˆ‡æ¢ï¼Œè€Œå¯¼è‡´é¡¶éƒ¨åœ°å€æ å’Œåº•éƒ¨å·¥å…·æ é®æŒ¡ä½ header å’Œ footer å…ƒç´ ã€‚</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script&gt;
header.addEventListener('touchmove', function(e){
     e.preventDefault();
});     
footer.addEventListener('touchmove', function(e){
     e.preventDefault();
});
&lt;/script&gt;
</code></pre></div></div>

<p>ç»†èŠ‚å®Œå–„åçš„æµ‹è¯•åœ°å€ï¼š <a href="http://www.sinsy.top/hungry/learn/mobile/iscroll/example/solutionDetail.html">solutionDetail.html</a></p>

<h2 id="ä¸‰æ’ä»¶åŒ–">ä¸‰ã€æ’ä»¶åŒ–</h2>

<ul>
  <li><a href="http://github.com/sinsy/iscroll/">githubåœ°å€</a></li>
  <li><a href="http://www.sinsy.top/hungry/learn/mobile/iscroll.zip">ä»£ç ä¸‹è½½åœ°å€</a></li>
</ul>

:ET